<!-- coding: gbk -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>法术列表模板</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<style>
html,body { 
	font-family: Arial, Helvetica, sans-serif;
}
a {
	color: #704cd9;
	text-decoration:none;
	font-weight: bold;
	font-style: italic;
	margin-left: 20px;
	visibility: visible;
}
p {
	line-height: 150%;
}

sup {
	line-height: 0;
	margin-left: 0.2rem;
}

text
</style>
</head>
<body>
<p>工具网页，不用于不全书页面。单击法术复制相应html链接代码。</p>
<div>这个文本框中写入标签中需要额外添加的内容：<input id="extra" type=
"text" value='class="spell"'></div>
<div>复制预览：<input id="clip" type="text"></div>
<p>输入文本筛选：<input id="findi" type="text"></p>
{{内容}}

</body>
<script>
	function insertStr(str, index, insertStr) {
		return str.substring(0, index)+insertStr+str.substring(index);
	}
	document.querySelectorAll("a").forEach(item=>{
		item.addEventListener('click', event=>{
			event.preventDefault();
			let outerH = event.target.outerHTML;

			outerH = outerH.replace(/style=".*"/, '')

			clip = document.getElementById("clip")
			extra = document.getElementById("extra")
			
			if(extra.value != "") {
				outerH = insertStr(outerH, 2, ' '+extra.value);
			}
			clip.value = outerH;
			clip.select();
			document.execCommand("copy");
			return false;
		})
	})

	const nameFind = document.getElementById("findi")
	nameFind.addEventListener('input', ()=>{
		sStr = nameFind.value.toLowerCase();
		document.querySelectorAll("a").forEach(item=>{
			if (sStr=="" || item.textContent.toLowerCase().includes(sStr)) {
				item.style.display="inline";
				item.nextElementSibling.style.display="inline";
			}
			else {
				item.style.display="none";
				item.nextElementSibling.style.display="none";
			}
		})
	})
</script>
</html>
